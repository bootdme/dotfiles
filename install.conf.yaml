- defaults:
    link:
      create: true
      relink: true

# Remove dead symlinks
- clean:
    ~/:
    ~/.config:
      recursive: true

- shell:
    - [git submodule update --init --recursive, Installing submodules]

- link:
    # Neovim
    ~/.config/nvim:
      glob: true
      path: nvim/*
    # Fish
    ~/.config/fish:
      glob: true
      path: fish/*
    # Kitty
    ~/.config/kitty: kitty/
    # Git
    ~/.config/git/config.base: git/config.base
- ifmacos:
    - link:
        # Nu Shell
        ~/Library/Application Support/nushell/env.nu: nushell/env.nu
        ~/Library/Application Support/nushell/completion.nu: nushell/completion.nu
        ~/Library/Application Support/nushell/config.nu: nushell/config.nu
        ~/Library/Application Support/nushell/aliases.nu: nushell/aliases.nu

        # Yabai
        ~/.config/yabai: yabai/

        # Skhd
        ~/.config/skhd: skhd/
    - tap: [homebrew/core, homebrew/services, homebrew/cask-fonts, rsteube/homebrew-tap]

- iffedora:
    - link:
        # i3
        ~/.config/i3: i3/

        # Nu Shell
        ~/.config/nushell/env.nu: nushell/env.nu
        ~/.config/nushell/config.nu: nushell/config.nu
        ~/.config/nushell/aliases.nu: nushell/aliases.nu

- omnipkg:
    - install:
        [
          { brew: bitwarden },
          { brew: cmake },
          { brew: discord },
          { brew: docker },
          { brew: fd },
          { brew: fish },
          { brew: firefox },
          { brew: font-jetbrains-mono-nerd-font },
          { brew: fzf },
          { brew: google-chrome },
          { brew: go },
          { brew: gnupg },
          { brew: kitty },
          { brew: koekeishiya/formulae/skhd },
          { brew: koekeishiya/formulae/yabai },
          { brew: mold },
          { brew: neovim },
          { brew: pinentry-mac },
          { brew: postgresql },
          { brew: postman },
          { brew: rsteube/tap/carapace },
          { brew: spotify },
          { brew: macos-trash },
          { brew: wget },
          { dnf: cmake },
          { dnf: fzf },
          { dnf: golang },
          { dnf: kitty },
          { dnf: neovim },
          { dnf: openssl-devel },
          { dnf: postgresql },
        ]

- cargo:
    - bat
    - bacon
    - cargo-info
    - cargo-install
    - exa
    - fnm
    - ripgrep
    - sccache
    - speedtest-rs
    - nu
    - zoxide
